<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
   PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
    
    <mapper namespace="ferp.dao.A1_Dao">
		
		<!-- 로그인 -->
		<select id="storeLogin" parameterType="store" resultType="store">
			SELECT * 
			FROM STORE
			WHERE frRegiNum = #{frRegiNum}
			AND frPass = #{frPass}
		</select>
		
		<!-- 본사 로그인 -->
		<select id="empLogin" parameterType="emp" resultType="emp">
			SELECT * 
			FROM emp
			WHERE empnum = #{empnum}
			AND pass = #{pass}
		</select>
		
		<!-- 로그인한 매장의 직원 목록 불러오기 -->
		<select id="getStoreClerk" parameterType="storeclerk" resultType="storeclerk">
			SELECT *
			FROM STORECLERK
			WHERE frRegiNum = #{frRegiNum}
		</select>
		
		
		<!-- 출근 등록 -->
		<insert id="addOnDay" parameterType="clerkschedule">
		INSERT INTO EMPCHECKIN(FrRegiNum,clerkNum,onTime) VALUES (
			#{FrRegiNum},
			#{clerkNum},
			sysdate
		)
		</insert>
		
		<!-- 퇴근 등록 -->
		<update id="addOffTime" parameterType="clerkschedule">
		UPDATE EMPCHECKIN
			SET OFFTIME = SYSDATE
		WHERE clerkNum = #{clerkNum}
		AND TO_CHAR(ONTIME,'YYYY-MM-DD') = TO_CHAR(SYSDATE, 'YYYY-MM-DD')
		AND FRREGINUM =#{FrRegiNum}
		</update>
		
		<!-- 로그인한 매장의 판매 메뉴 불러오기(전체) -->
		<select id="getMenuList" parameterType="menu" resultType="menu">
			SELECT m.MENUNUM, MENUNAME, PRICE, INFO, IMG, NECESSARY, CATEGORY
			FROM MENU m, ONSALE o 
			WHERE m.MENUNUM = o.MENUNUM
			AND FrRegiNum = #{FrRegiNum}
			ORDER BY MENUNAME
		</select>
		
		<!-- 로그인한 매장의 판매 메뉴 불러오기(커피) -->
		<select id="getMenuListCoffee" parameterType="menu" resultType="menu">
			SELECT m.MENUNUM, MENUNAME, PRICE, INFO, IMG, NECESSARY, CATEGORY
			FROM MENU m, ONSALE o 
			WHERE m.MENUNUM = o.MENUNUM
			AND FrRegiNum = #{FrRegiNum}
			AND category = 'coffee'
			ORDER BY MENUNAME
		</select>
		
		<!-- 로그인한 매장의 판매 메뉴 불러오기(온리아이스) -->
		<select id="getMenuListSmoothie" parameterType="menu" resultType="menu">
			SELECT m.MENUNUM, MENUNAME, PRICE, INFO, IMG, NECESSARY, CATEGORY
			FROM MENU m, ONSALE o 
			WHERE m.MENUNUM = o.MENUNUM
			AND FrRegiNum = #{FrRegiNum}
			AND category = 'onlyIce'
			ORDER BY MENUNAME
		</select>
		
		<!-- 로그인한 매장의 판매 메뉴 불러오기(기타음료) -->
		<select id="getMenuListEtc" parameterType="menu" resultType="menu">
			SELECT m.MENUNUM, MENUNAME, PRICE, INFO, IMG, NECESSARY, CATEGORY
			FROM MENU m, ONSALE o 
			WHERE m.MENUNUM = o.MENUNUM
			AND FrRegiNum = #{FrRegiNum}
			AND category = 'etc'
			ORDER BY MENUNAME
		</select>
		
		<!-- 로그인한 매장의 판매 메뉴 불러오기(샌드위치) -->
		<select id="getMenuListSandwich" parameterType="menu" resultType="menu">
			SELECT m.MENUNUM, MENUNAME, PRICE, INFO, IMG, NECESSARY, CATEGORY
			FROM MENU m, ONSALE o 
			WHERE m.MENUNUM = o.MENUNUM
			AND FrRegiNum = #{FrRegiNum}
			AND category = 'sandwich'
			ORDER BY MENUNAME
		</select>
		
		<!-- 로그인한 매장의 판매 메뉴 불러오기(케이크) -->
		<select id="getMenuListCake" parameterType="menu" resultType="menu">
			SELECT m.MENUNUM, MENUNAME, PRICE, INFO, IMG, NECESSARY, CATEGORY
			FROM MENU m, ONSALE o 
			WHERE m.MENUNUM = o.MENUNUM
			AND FrRegiNum = #{FrRegiNum}
			AND category = 'cake'
			ORDER BY MENUNAME
		</select>
		
		<!-- 본사 제공 전체 메뉴 가져오기 -->
		<select id="getAllMenu" parameterType="menu" resultType="menu">
			SELECT *
			FROM MENU
			WHERE MENUNAME LIKE '%'||#{menuName}||'%'
			ORDER BY MENUNAME
		</select>
		
		<!-- 판매할 메뉴 추가 -->
		<insert id="insOnsale" parameterType="onsale">
			INSERT INTO ONSALE VALUES(
				#{menuNum},
				#{frRegiNum}
			)
		</insert>
		
		<!-- 판매할 메뉴 삭제 -->
		
    </mapper>